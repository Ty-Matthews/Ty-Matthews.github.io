<HTML>
<HEAD>
<META NAME="description" CONTENT="Online Duke3d Build Tutorial.  Clear,
step-by-step instructions on creating the advanced effects of the Build level
editor for Duke Nukem 3d.">

<META NAME="keywords" CONTENT="duke3d,build,duke,level editors,tutorial">

<TITLE>Cranes</TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF" LINK="#ff6347" ALINK="#ff6347" VLINK="40a0a0">

<H1>Cranes</H1>
<IMG SRC="build.gif">

<BR>
<BR>

<CENTER><TABLE CELLPADDING="0" ALIGN="center">
<TR>
<TD VALIGN="MIDDLE" WIDTH="75%">
Cranes are yet another of Duke 3D's many fascinating features. By their ability to pick up and drop any graphic sprite (whether fixed or animated) at predetermined locations, they offer  many possibilities to the map designer and can bring another tactical element to the game when used in Dukematch levels. Oddly enough, very little has been written about cranes (the BuildDocs omit them entirely) although they are used in the popular E1L4 level: Toxic Dump.
 While cranes operate all by themselves,  <A HREF="convey.htm">conveyor belts</A> will be needed in most instances for moving objects around.<BR>
<BR>
Start by making a large outer sector and two smaller inner void  sectors as shown here. Go to 3D mode right away and make the ceiling height about 70 clicks above the floor. Go back to 2D mode and draw the remaining sectors by adding new vertices where required and also by splitting the existing ones. Raise the floor of sectors <B>2, 3, 4, 5, 6, 7</B> and <B>9</B> high enough so that Duke can't jump up to them (30 clicks in the example map) and raise the floor of sectors <B>1</B> and <B>8</B> a few clicks to create a platform. Also, raise the ceiling height of sectors <B>1, 2, 3, 4, A,</B> and <B>B</B> by 4 clicks above the previously set ceiling height. These will be the crane ceiling &quot;track&quot; sectors.</TD>
<TD ALIGN="RIGHT" VALIGN="MIDDLE" WIDTH="25%">
<IMG SRC="cranes1.gif">
</TD>
</TR>
</TABLE></CENTER>

<BR>
<BR>

<CENTER><TABLE CELLPADDING="0" ALIGN="center">
<TR>
<TD ALIGN="LEFT" VALIGN="MIDDLE" WIDTH="20%">
<IMG SRC="cranes2.gif" WIDTH="190" HEIGHT="410">
</TD>
<TD ALIGN="LEFT" VALIGN="MIDDLE" WIDTH="65%">
Using the '<B>S</B>' key, place two sprites at the locations shown in the  picture on the left. Next, go to 3D mode and with the cursor  pointing at the sprite in sector 1, hit '<B>V</B>'  twice. Select tile <B>#1221</B>, a vertical pole appears. As far as the cranepole sprite is concerned, you can bring it all the way to the ceiling or the the floor or even just leave it where it is, this has no effect on its function in gameplay. Aim the cursor at the second sprite, hit '<B>V</B>'  twice, select tile <B>#1222</B><B> </B>and the crane appears. This sprite has to be on the ceiling to work properly so hit '<B>Ctrl-PgUp</B>' while aiming at it. Go back to 2D mode, point the mouse cursor on the cranepole sprite, hit '<B>B</B>' to make it &quot;blocking&quot; and using '<B>Alt-H</B>', assign a unique <B>hitag</B> to it (1 in this case). Change the <B>hitag</B> of the crane sprite to the same value as its target cranepole and use the '<B>&lt;</B>' and '<B>&gt;</B>' keys to change the angle so it points in the direction the  crane will travel.   Repeat this process for the crane-cranepole pair  in the picture on the right using different <B>hitags</B>. The lotag values of these sprites have no effect. Just make sure the crane sprites sit exactly in the center of their &quot;track&quot; sector.
</TD>
<TD ALIGN="RIGHT" VALIGN="MIDDLE" WIDTH="15%">
<IMG SRC="cranes3.gif">
</TD>
</TR>
</TABLE></CENTER>

<BR>
<BR>

<CENTER><TABLE CELLPADDING="0" ALIGN="center">
<TR>
<TD ALIGN="CENTER" VALIGN="MIDDLE" WIDTH="30%"><IMG SRC="cranesA.gif"></TD>
<TD WIDTH="5%"></TD>
<TD ALIGN="CENTER" VALIGN="MIDDLE" WIDTH="40%"><IMG SRC="cranesB.gif"></TD>
</TR>
<TR>
<TD ALIGN="CENTER" VALIGN="TOP" WIDTH="30%"><B>Cranepole sprite</B></TD>
<TD WIDTH="5%"></TD>
<TD ALIGN="CENTER" VALIGN="TOP" WIDTH="40%"><B>Crane sprite</B></TD>
</TR>
</TABLE></CENTER>

<BR>
<BR>

<P>
At this point, feel free to take a little time to change the ceiling &quot;track&quot; texture (tile <B>#353</B> in the top right picture), the ceiling  track inner side walls texture (tile <B>#288</B>). If necessary, use the '<B>F</B>' key to flip the ceiling texture and since the crane sprites were previously centered in their respective sectors, they can be used as a reference to center the ceiling texture using the '<B>Shift-4</B>' and '<B>Shift-6</B>' keys.
</P>

<BR>
<BR>

<TABLE CELLPADDING="0">
<TR>
<TD ALIGN="LEFT" VALIGN="MIDDLE" WIDTH="15%">
<IMG SRC="cranes4.gif">
</TD>
<TD ALIGN="LEFT" VALIGN="MIDDLE" WIDTH="85%">
Now, in 2D mode, insert SectorEffector sprites in  sectors <B>2, 4, 5, 6, 7, </B><B>8</B> and <B>9</B> where the conveyor belts will be, hit the '<B>Alt-T</B>' key and change their <B>lotag</B> value to <B>24</B>. Change the angle of these sprites to point in the direction of belt displacement as shown in the pictures left and below, there are 7 in all. Also, place 4 NukeBarrel sprites at various locations on the conveyor belts. In this example map, they have been made to be &quot;blocking&quot; but  this is not necessary.  </TD>
</TR>
</TABLE>

<TABLE CELLPADDING="0">
<TR>
<TD ALIGN="LEFT" VALIGN="MIDDLE" WIDTH="70%">
While cranes can pick up any graphical sprite, some behave strangely and won't go all the way to the floor when dropped. From here, it's a matter of trial and error if you want to use other sprites. NukeBarrels work well and they spill a puddle of radioactive sludge when shot (not on moving floors or in mid-air though).</TD>
<TD ALIGN="RIGHT" VALIGN="MIDDLE" WIDTH="30%">
<IMG SRC="cranes5.gif">
</TD>
</TR>
</TABLE>

<BR>
<BR>

<P>
Go to 3D mode and change the floor texture of the sectors to tile <B>#1156</B>. It might be necessary at this point to make the floors Relatively Aligned by using the '<B>R</B>' key while pointing at them with the mouse cursor. Make sure that the lines in the belt are oriented the right way and that, once in the game, the belts are moving in the same direction as the floor. It might be necessary to  use the '<B>F</B>' key to align the textures properly. For a detailed description of this process, consult the <A HREF="align.htm">floor texture alignment</A> tutorial.
</P>

<P ALIGN="center"><IMG SRC="cranesC.gif"></P>

<BR>

<HR SIZE="1">

<H3>A few words on the behavior of cranes:</H3>

<UL>
<LI>As soon as any object enters the sector containing the cranepole sprite, the crane initiates the pickup an drop sequence even if the object leaves the sector before the crane arrives.<BR>
<BR>
</LI>
<LI>Objects are picked up on a first come-first served basis when entering the cranepole sector although it is possible for the player to jump on top of the object in order to picked up first.<BR>
<BR>
</LI>
<LI>If Duke is looking in another direction before being picked up by the crane, he will be instantly turned around to face direction of travel once picked up. He can look or aim up and down and shoot while in the crane but cannot turn around.<BR>
<BR>
</LI>
<LI>Any destructible object can be shot at and destroyed while carried by the crane. Also, if you shoot at the crane in a particular spot with bullet projectiles, you will hear a ricochet sound and it will drop the object it is carrying in mid-travel. Often, monsters which have been picked up by the crane free themselves this way (while trying to shoot Duke) and so can Duke.<BR>
<BR>
</LI>
<LI>When Duke enters the cranepole sector while flying with the jetpack, the crane pickup sequence is initiated but he won't  be picked up. He will temporarily be driven all the way to the floor either by the crane or by an object that can't be picked up (like barrels) when standing in the drop zone while the object passes over his head.<BR>
<BR>
</LI>
<LI>It is possible to use the jetpack to fly up to the  crane and pick up any weapon, ammo, gear or health it is carrying while in transit. If you fly all the way up the ceiling of the track sector and stand in its path, it will stop until you move out of the way.<BR>
<BR>
</LI>
<LI>Cranes are, of course, indestructible but cannot harm Duke either. They can be used for going up places too high to jump to if you don't have a jetpack, for delivering pipebombs to your opponents and setting off laser tripbombs.<BR>
<BR>
</LI>
<LI>It is also possible to hop on a crane that has already picked up an object and and walk along while it moves to get to its destination (a bit tricky though).
</LI>
</UL>

<BR>
<BR>

<H3>Limitations of cranes:</H3>

<UL>
<LI>Cranes work well as long as their path is orthogonal to the map grid, if you  give them a diagonal or angular path, they will behave erratically.<BR>
<BR>
</LI>
<LI>Cranes only move in a straight line and will pickup any object present in the cranepole sector, even if that sector is much larger than the track sector and the object is far from the cranepole sprite. It simply &quot;snaps&quot; to where the crane lowers.This is somewhat strange. In order to keep things realistic, make your pickup sectors small.<BR>
<BR>
</LI>
<LI>The speed of cranes cannot be altered.<BR>
<BR>
</LI>
<LI>Aliens can be picked up by the crane although it's very hard to get them to stay in the pickup sector long enough for that to happen. Unless, of course,  you place an alien &quot;stayput&quot; sprite in the pickup sector in Build. In that case, make the sector large enough to &quot;contain&quot; it, otherwise the crane might behave erratically.<BR>
<BR>
</LI>
<LI>If one does get picked up by chance and you want to kill it in transit, unless you're a crack shot, forget projectile weapons, use the RPG. Cranes move relatively fast.<BR>
<BR>
</LI>
<LI>Some sprites like rubbercans and statues don't drop all the way to the floor when released by the crane and can become permanent obstacles in the game. Sprites that work well are weapons, ammo, gear, health and pipebombs, of course. Experiment and find what works best.
</LI>
</UL>

<BR>
<BR>

<CENTER><TABLE CELLPADDING="0" ALIGN="center">
<TR>
<TD WIDTH="80%">
</TD>
<TD ALIGN="LEFT" VALIGN="MIDDLE" WIDTH="10%">
Page written by:
</TD>
<TD ALIGN="LEFT" VALIGN="MIDDLE" WIDTH="10%">
<A HREF="mailto:jfgrol@cam.org"><IMG SRC="jfanim.gif" BORDER="0" WIDTH="110" HEIGHT="96"></A>
</TD>
</TR>
</TABLE></CENTER>

<BR>
<BR>

<H3 ALIGN="center"><A HREF="local.htm">Download this page locally</A></H3>
<h3 align="center"><a href="cranem.zip">Download the Crane map</a></h3>
<BR>
<BR>

<HR SIZE="1">

<CENTER><TABLE CELLPADDING="0" ALIGN="center">
<TR>
<TD ALIGN="CENTER" VALIGN="MIDDLE" WIDTH="32%">
Duke Nukem 3D is copyright &copy;1996
</TD>
<TD ALIGN="CENTER" VALIGN="MIDDLE" WIDTH="17%">
<A HREF="http://www.3drealms.com/"><IMG SRC="3drealms.gif" BORDER="0"></A>
</TD>
<TD ALIGN="CENTER" VALIGN="MIDDLE" WIDTH="18%">
, All Rights reserved.
</TD>
</TR>
</TABLE></CENTER>

<H3 ALIGN="CENTER">THIS PAGE IS NOT MADE BY OR SUPPORTED BY 3D REALMS</H3>

<CENTER><TABLE CELLPADDING="0" ALIGN="center">
<TR>
<TD ALIGN="CENTER" VALIGN="MIDDLE" WIDTH="10%">
<IMG SRC="duke.gif">
</TD>
<TD ALIGN="LEFT" VALIGN="MIDDLE" WIDTH="50%">
Copyright &copy;1996 <a href="mailto:jfgrol@cam.org">Jean-Francois Groleau</a>, All Rights reserved.<BR>
<A HREF="dukefaq.htm">Go back to my Duke FAQ BUILD page<BR>
</A><A HREF="duketxt.htm">Go back to my Duke FAQ BUILD page Text-Only</A>
</TD>
</TR>
</TABLE></CENTER>

</BODY>
</HTML>
